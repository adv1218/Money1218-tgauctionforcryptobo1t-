# Crypto Auction

Backend-—Å–∏—Å—Ç–µ–º–∞ –∞—É–∫—Ü–∏–æ–Ω–æ–≤ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ –≤ —Å—Ç–∏–ª–µ Telegram Gift Auctions.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–¥–ª—è –ø—Ä–æ–≤–µ—Ä—è—é—â–∏—Ö)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+
- MongoDB (–ª–æ–∫–∞–ª—å–Ω—ã–π –∏–ª–∏ Atlas)
- Redis (–ª–æ–∫–∞–ª—å–Ω—ã–π –∏–ª–∏ –æ–±–ª–∞—á–Ω—ã–π)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:

```env
PORT=3000
MONGODB_URI=mongodb://localhost:27017/crypto-auction
REDIS_URL=redis://localhost:6379
NODE_ENV=development
```

### 3. –ó–∞–ø—É—Å–∫

```bash
npm run dev
```

–û—Ç–∫—Ä—ã—Ç—å http://localhost:3000

---

##  –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ú–Ω–æ–≥–æ—Ä–∞—É–Ω–¥–æ–≤—ã–µ –∞—É–∫—Ü–∏–æ–Ω—ã** ‚Äî –∫–∞–∂–¥—ã–π —Ä–∞—É–Ω–¥ —Ç–æ–ø-N –ø–æ–ª—É—á–∞—é—Ç –ø–æ–¥–∞—Ä–∫–∏
- **–ì–∏–±–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞—É–Ω–¥–æ–≤, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞
- **Anti-sniping** ‚Äî –ø—Ä–æ–¥–ª–µ–Ω–∏–µ —Ä–∞—É–Ω–¥–∞ –ø—Ä–∏ —Å—Ç–∞–≤–∫–∞—Ö –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–µ–∫—É–Ω–¥—ã
- **–ó–∞–º–æ—Ä–æ–∑–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤** ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞–≤–æ–∫
- **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç** ‚Äî –ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏–µ –ø–æ–ª—É—á–∞—é—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ –æ–±—Ä–∞—Ç–Ω–æ

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| PORT | –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ | 3000 |
| MONGODB_URI | MongoDB connection string | ‚Äî |
| REDIS_URL | Redis connection string | ‚Äî |
| NODE_ENV | development / production | development |

## –ú–µ—Ö–∞–Ω–∏–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–∞

### –†–∞—É–Ω–¥—ã –∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏

1. –ê—É–∫—Ü–∏–æ–Ω —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
   - **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∞—Ä–∫–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 500)
   - **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5)
   - **–ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–π –≤ —Ä–∞—É–Ω–¥–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ø-100)
   - **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1000)

2. –ü–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞—É–Ω–¥–∞:
   - **–¢–æ–ø-N** ‚Üí –ø–æ–ª—É—á–∞—é—Ç –ø–æ–¥–∞—Ä–∫–∏ (#1, #2, ...)
   - **–û—Å—Ç–∞–ª—å–Ω—ã–µ** ‚Üí –ø–æ–ª–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤

3. –ö–∞–∂–¥—ã–π —Ä–∞—É–Ω–¥ ‚Äî **–Ω–æ–≤—ã–µ —Å—Ç–∞–≤–∫–∏**, –Ω–æ–≤—ã–π —Ä–µ–π—Ç–∏–Ω–≥

### –°—Ç–∞–≤–∫–∏

- –ú–∏–Ω–∏–º—É–º = –∑–Ω–∞—á–µ–Ω–∏–µ `minBid` –∞—É–∫—Ü–∏–æ–Ω–∞
- –ú–æ–∂–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å —Å—Ç–∞–≤–∫—É (–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ —Ç–µ–∫—É—â–µ–π)
- –°—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞—é—Ç—Å—è –¥–æ –∫–æ–Ω—Ü–∞ —Ä–∞—É–Ω–¥–∞

### Anti-sniping

- –°—Ç–∞–≤–∫–∞ –≤ —Ç–æ–ø-3 –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥ ‚Üí —Ç–∞–π–º–µ—Ä +30 —Å–µ–∫
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç "—Å–Ω–∞–π–ø–µ—Ä—Å–∫–∏–µ" —Å—Ç–∞–≤–∫–∏ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–æ–º–µ–Ω—Ç

##  API

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| POST | /api/users/login | –í—Ö–æ–¥/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| GET | /api/users/me | –ü—Ä–æ—Ñ–∏–ª—å |
| POST | /api/users/me/deposit | –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å |
| GET | /api/users/me/wins | –ú–æ–∏ –ø–æ–¥–∞—Ä–∫–∏ |

### –ê—É–∫—Ü–∏–æ–Ω—ã

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| GET | /api/auctions | –°–ø–∏—Å–æ–∫ –∞—É–∫—Ü–∏–æ–Ω–æ–≤ |
| GET | /api/auctions/:id | –î–µ—Ç–∞–ª–∏ –∞—É–∫—Ü–∏–æ–Ω–∞ |
| POST | /api/auctions | –°–æ–∑–¥–∞—Ç—å –∞—É–∫—Ü–∏–æ–Ω |
| POST | /api/auctions/:id/bid | –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É |
| GET | /api/auctions/:id/my-bid | –ú–æ—è —Å—Ç–∞–≤–∫–∞ |
| GET | /api/auctions/:id/leaderboard | –¢–æ–ø —Å—Ç–∞–≤–æ–∫ |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ config/      # Database, Redis, environment
‚îú‚îÄ‚îÄ models/      # Mongoose schemas (User, Auction, Bid, Transaction)
‚îú‚îÄ‚îÄ services/    # Business logic (AuctionService, BidService, BalanceService)
‚îú‚îÄ‚îÄ controllers/ # HTTP handlers
‚îú‚îÄ‚îÄ routes/      # API routes
‚îú‚îÄ‚îÄ middleware/  # Auth, error handling
‚îú‚îÄ‚îÄ jobs/        # Background tasks (RoundProcessor)
‚îî‚îÄ‚îÄ utils/       # Redis locks

public/
‚îú‚îÄ‚îÄ index.html   # SPA entry point
‚îú‚îÄ‚îÄ css/         # Telegram-style –¥–∏–∑–∞–π–Ω (glassmorphism)
‚îî‚îÄ‚îÄ js/          # Frontend app (vanilla JS)

tests/
‚îî‚îÄ‚îÄ load/        # Load testing scripts
```

##  –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ë–æ—Ç—ã —Å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º–∏ —Å—Ç–∞–≤–∫–∞–º–∏ (anti-sniping —Ç–µ—Å—Ç)
npm run test:load

# –ë–æ—Ç—ã —Å –æ–¥–Ω–æ–π —Å—Ç–∞–≤–∫–æ–π –∑–∞ —Ä–∞—É–Ω–¥
npm run test:single
```

##  UI / Frontend

### Telegram-style –¥–∏–∑–∞–π–Ω

- **Glassmorphism** ‚Äî –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å blur-—ç—Ñ—Ñ–µ–∫—Ç–æ–º
- **–°–ª–∞–π–¥–µ—Ä —Å—Ç–∞–≤–æ–∫** ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π range input —Å floating badge
- **TOP-N –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ —Ç–æ–ø –∏ —Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ –¥–æ —Ç–æ–ø–∞
- **Stat-cards** ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞, —Ç–∞–π–º–µ—Ä —Ä–∞—É–Ω–¥–∞, –æ—Å—Ç–∞—Ç–æ–∫ –ø–æ–¥–∞—Ä–∫–æ–≤
- **Leaderboard** ‚Äî —Ç–æ–ø-3 —Å –∞–≤–∞—Ç–∞—Ä–∞–º–∏ –∏ —Ä–∞–Ω–≥–∞–º–∏

### –°–ª–∞–π–¥–µ—Ä —Å—Ç–∞–≤–æ–∫

| –°–æ—Å—Ç–æ—è–Ω–∏–µ | Badge | –ü—Ä–æ–≥—Ä–µ—Å—Å |
|-----------|-------|----------|
| –ù–µ –≤ —Ç–æ–ø–µ | –°–µ—Ä—ã–π | –°–µ—Ä—ã–π |
| –í —Ç–æ–ø–µ | –ö—Ä–∞—Å–Ω—ã–π | –ì—Ä–∞–¥–∏–µ–Ω—Ç (–∂–µ–ª—Ç—ã–π ‚Üí –∫—Ä–∞—Å–Ω—ã–π) |



## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Node.js** + TypeScript (ES modules)
- **MongoDB** + Mongoose
- **Redis** (distributed locks)
- **Express.js**
- **Vanilla JS** (frontend)
