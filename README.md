#  Crypto Auction - High-Load Auction System

> ** –í–∏–¥–µ–æ-–æ–±–∑–æ—Ä:** [–°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ YouTube](https://youtu.be/YNWJzRTDirQ)
> 
> ** Live Demo:** [http://77.232.142.119](http://77.232.142.119)

–í—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É–∫—Ü–∏–æ–Ω–æ–≤ –¥–ª—è —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ (Telegram Stars).

---

##  –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- MongoDB
- Redis

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|-----------|------------|
| Runtime | Node.js + TypeScript (ES modules) |
| Web Framework | **Fastify** (2-3x –±—ã—Å—Ç—Ä–µ–µ Express) |
| Validation | **Zod** |
| Database | MongoDB + Mongoose |
| Cache/Queues | Redis + **Bull Queue** |
| Real-time | **Socket.io** |
| Frontend | Vanilla JS |

---

##  –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ High-Load

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
|-----------|-------------------|
| Node.js Cluster | 2 –≤–æ—Ä–∫–µ—Ä–∞ –Ω–∞ 2 CPU |
| Fastify | 2-3x –±—ã—Å—Ç—Ä–µ–µ Express |
| Rate Limiting | 1000 req/s API, 300 req/s —Å—Ç–∞–≤–∫–∏ |
| MongoDB | –ü—É–ª 10-50 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π |
| Redis | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ |
| Bull Queue | –ù–∞–¥—ë–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞—É–Ω–¥–æ–≤ |
| Socket.io | Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

---

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/adv1218/Money1218-tgauctionforcryptobo1t-.git
cd Money1218-tgauctionforcryptobo1t-
```

### 2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env`

```bash
cp .env.example .env
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

```bash
docker compose -f docker-compose.prod.yml up -d --build
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å

```bash
docker compose -f docker-compose.prod.yml ps
docker compose -f docker-compose.prod.yml logs app
```

### 5. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

```
http://localhost
```

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|----------|--------|
| PORT | –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ | 3000 |
| MONGODB_URI | MongoDB connection string | `mongodb://localhost:27017/auction` |
| REDIS_URL | Redis connection string | `redis://localhost:6379` |
| NODE_ENV | –û–∫—Ä—É–∂–µ–Ω–∏–µ | development / production |

---

##  –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ú–Ω–æ–≥–æ—Ä–∞—É–Ω–¥–æ–≤—ã–µ –∞—É–∫—Ü–∏–æ–Ω—ã** ‚Äî –∫–∞–∂–¥—ã–π —Ä–∞—É–Ω–¥ —Ç–æ–ø-N –ø–æ–ª—É—á–∞—é—Ç –ø–æ–¥–∞—Ä–∫–∏
- **–ì–∏–±–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞—É–Ω–¥–æ–≤, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞
- **Anti-sniping** ‚Äî –ø—Ä–æ–¥–ª–µ–Ω–∏–µ —Ä–∞—É–Ω–¥–∞ –ø—Ä–∏ —Å—Ç–∞–≤–∫–∞—Ö –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–µ–∫—É–Ω–¥—ã
- **–ó–∞–º–æ—Ä–æ–∑–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤** ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞–≤–æ–∫
- **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç** ‚Äî –ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏–µ –ø–æ–ª—É—á–∞—é—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ –æ–±—Ä–∞—Ç–Ω–æ
- **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** ‚Äî WebSocket –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π UI

---

##  –ú–µ—Ö–∞–Ω–∏–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–∞

### –†–∞—É–Ω–¥—ã –∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏

1. –ê—É–∫—Ü–∏–æ–Ω —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
   - **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∞—Ä–∫–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 500)
   - **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5)
   - **–ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–π –≤ —Ä–∞—É–Ω–¥–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ø-100)
   - **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1000)

2. –ü–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞—É–Ω–¥–∞:
   - **–¢–æ–ø-N** ‚Üí –ø–æ–ª—É—á–∞—é—Ç –ø–æ–¥–∞—Ä–∫–∏ (#1, #2, ...)
   - **–û—Å—Ç–∞–ª—å–Ω—ã–µ** ‚Üí –ø–æ–ª–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤

3. –ö–∞–∂–¥—ã–π —Ä–∞—É–Ω–¥ ‚Äî **–Ω–æ–≤—ã–µ —Å—Ç–∞–≤–∫–∏**, –Ω–æ–≤—ã–π —Ä–µ–π—Ç–∏–Ω–≥

### –°—Ç–∞–≤–∫–∏

- –ú–∏–Ω–∏–º—É–º = –∑–Ω–∞—á–µ–Ω–∏–µ `minBid` –∞—É–∫—Ü–∏–æ–Ω–∞ (–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ Zod)
- –ú–æ–∂–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å —Å—Ç–∞–≤–∫—É (–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ —Ç–µ–∫—É—â–µ–π)
- –°—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞—é—Ç—Å—è –¥–æ –∫–æ–Ω—Ü–∞ —Ä–∞—É–Ω–¥–∞

### Anti-sniping

- –°—Ç–∞–≤–∫–∞ –≤ —Ç–æ–ø-3 –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥ ‚Üí —Ç–∞–π–º–µ—Ä +30 —Å–µ–∫
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç "—Å–Ω–∞–π–ø–µ—Ä—Å–∫–∏–µ" —Å—Ç–∞–≤–∫–∏ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–æ–º–µ–Ω—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Ä–∞—É–Ω–¥–∞ –≤ Bull Queue

---

##  API

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| POST | /api/users/login | –í—Ö–æ–¥/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| GET | /api/users/me | –ü—Ä–æ—Ñ–∏–ª—å |
| POST | /api/users/me/deposit | –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å |
| GET | /api/users/me/wins | –ú–æ–∏ –ø–æ–¥–∞—Ä–∫–∏ |

### –ê—É–∫—Ü–∏–æ–Ω—ã

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| GET | /api/auctions | –°–ø–∏—Å–æ–∫ –∞—É–∫—Ü–∏–æ–Ω–æ–≤ |
| GET | /api/auctions/:id | –î–µ—Ç–∞–ª–∏ –∞—É–∫—Ü–∏–æ–Ω–∞ |
| POST | /api/auctions | –°–æ–∑–¥–∞—Ç—å –∞—É–∫—Ü–∏–æ–Ω |
| POST | /api/auctions/:id/bid | –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É |
| GET | /api/auctions/:id/my-bid | –ú–æ—è —Å—Ç–∞–≤–∫–∞ |
| GET | /api/auctions/:id/leaderboard | –¢–æ–ø —Å—Ç–∞–≤–æ–∫ |

### Health Check

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| GET | /api/health | –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ |

---

##  WebSocket Events

### Client ‚Üí Server

| Event | Payload | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|---------|----------|
| `join:auction` | `auctionId` | –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞—É–∫—Ü–∏–æ–Ω–∞ |
| `leave:auction` | `auctionId` | –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç –∞—É–∫—Ü–∏–æ–Ω–∞ |

### Server ‚Üí Client

| Event | Payload | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|---------|----------|
| `bid:new` | `{ rank, amount, userId, totalBids }` | –ù–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞ |
| `leaderboard:update` | `[{ rank, userId, username, amount }]` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ø–∞ |
| `timer:antiSnipe` | `{ newEndAt, extension }` | –¢–∞–π–º–µ—Ä –ø—Ä–æ–¥–ª—ë–Ω |
| `round:end` | `{ roundNumber, winnersCount }` | –†–∞—É–Ω–¥ –∑–∞–≤–µ—Ä—à—ë–Ω |
| `round:start` | `{ roundNumber, endAt, winnersCount }` | –ù–æ–≤—ã–π —Ä–∞—É–Ω–¥ |
| `auction:complete` | `{ auctionId }` | –ê—É–∫—Ü–∏–æ–Ω –∑–∞–≤–µ—Ä—à—ë–Ω |

---

##  –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
API_BASE=http://localhost:3000/api npx tsx tests/load/concurrent.ts
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 500-1000+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º.

---

##  –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ config/      # Database, Redis, environment
‚îú‚îÄ‚îÄ models/      # Mongoose schemas (User, Auction, Bid, Transaction)
‚îú‚îÄ‚îÄ services/    # Business logic (AuctionService, BidService, BalanceService)
‚îú‚îÄ‚îÄ routes/      # Fastify API routes with Zod validation
‚îú‚îÄ‚îÄ schemas/     # Zod validation schemas
‚îú‚îÄ‚îÄ middleware/  # Auth, error handling
‚îú‚îÄ‚îÄ jobs/        # Bull Queue processors (queues.ts)
‚îú‚îÄ‚îÄ websocket/   # Socket.io integration
‚îú‚îÄ‚îÄ cluster.ts   # Multi-worker mode
‚îú‚îÄ‚îÄ app.ts       # Fastify server
‚îî‚îÄ‚îÄ utils/       # Redis locks

public/
‚îú‚îÄ‚îÄ index.html   # SPA entry point
‚îú‚îÄ‚îÄ css/         # Telegram-style –¥–∏–∑–∞–π–Ω (glassmorphism)
‚îî‚îÄ‚îÄ js/          # Frontend app (vanilla JS)

tests/
‚îî‚îÄ‚îÄ load/        # Load testing scripts
```

---

##  –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **Rate Limiting** ‚Äî 1000 req/s API, 300 req/s —Å—Ç–∞–≤–∫–∏ (Nginx + Fastify)
- **Zod Validation** ‚Äî –≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è
- **MongoDB Transactions** ‚Äî —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
- **Redis Distributed Locks** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç race conditions

---

*Backend Auction Challenge 2026*
